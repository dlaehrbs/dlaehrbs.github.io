<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>심금 밴드</title>
    <style>
      .seat {
        display: inline-block;
        width: 40px;
        height: 40px;
        margin: 4px;
        border-radius: 10px;
        text-align: center;
        line-height: 40px;
        font-size: 18px;
        color: #fff;
        background-color: #ccc;
        
      }
      .seat.reserved {
        background-color: #f00;
      }
      h1{
        text-align:center;
        color: #cca
      }
      .seat-map{
        text-align:center:
      }
    </style>
  </head>
  <body>
    <h1>좌석배치도</h1>
    <div id="seat-map">
      <!-- 자바스크립트로 좌석이 동적으로 생성됩니다. -->
    </div>

    <script>
      const seatMapEl = document.getElementById("seat-map");
      const numSeats = 200; // 총 좌석 수
      const numCols = 20; // 가로 좌석 수
      const numRows = 10; // 세로 좌석 수
      const reservedSeats = []; // 예약된 좌석 배열

      // 좌석 생성
      for (let i = 0; i < numSeats; i++) {
        const seatEl = document.createElement("div");
        seatEl.classList.add("seat");
        seatEl.innerText = i + 1; // 좌석 번호를 좌석 div의 내부 텍스트로 설정
        seatMapEl.appendChild(seatEl);
        if ((i + 1) % numCols === 0) {
          // 가로 줄 바꿈 처리
          seatMapEl.appendChild(document.createElement("br"));
        }
    // 비밀번호 확인 함수
    function checkPassword(reservationInfo) {
    const password = prompt("예약 비밀번호를 입력해주세요.");
    if (password === reservationInfo.password) {
        return true;
    } else {
        alert("비밀번호가 일치하지 않습니다.");
        return false;
    }
    }

    // 좌석 클릭 이벤트 추가
    seatEl.addEventListener("click", () => {
    if (seatEl.classList.contains("reserved")) {
        // 이미 예약된 좌석인 경우
        const cancelReservation = confirm("이 좌석을 취소하시겠습니까?");
        if (cancelReservation) {
        const reservationIndex = reservedSeats.findIndex(
            (reservation) => reservation.seatNumber === seatEl.innerText
        );
        const reservationInfo = reservedSeats[reservationIndex];
        if (checkPassword(reservationInfo)) {
            reservedSeats.splice(reservationIndex, 1);
            seatEl.classList.remove("reserved");
            alert(`좌석 ${seatEl.innerText} 예약이 취소되었습니다.`);
        }
        }
    } else {
        // 예약되지 않은 좌석인 경우
        const name = prompt("예약자 이름을 입력해주세요.");
        const password = prompt("예약 비밀번호를 입력해주세요.");
        if (name && password) {
        seatEl.classList.add("reserved");
        reservedSeats.push({
            seatNumber: seatEl.innerText,
            name,
            password,
        });
        alert(`좌석 ${seatEl.innerText}이(가) ${name}님의 예약으로 등록되었습니다.`);
        } else {
        alert("이름과 비밀번호를 모두 입력해주세요.");
        }
    }
    });

      }
    </script>
  </body>
</html>
